<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>iOS 数据库实战</title>
  <meta name="description" content="经典的数据库服务开发库有一下几种：">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="iOS 数据库实战">
  <meta name="twitter:description" content="经典的数据库服务开发库有一下几种：">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="iOS 数据库实战">
  <meta property="og:description" content="经典的数据库服务开发库有一下几种：">
  
  <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
  <link href="/assets/images/favicon.png" rel="shortcut icon" type="image/png">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://vno.onevcat.com/2016/03/iOS%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%88%98/">
  <link rel="alternate" type="application/rss+xml" title="Blank_佐毅" href="http://vno.onevcat.com/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="前往 Blank_佐毅 的主页" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Blank_佐毅 logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Blank_佐毅" class="blog-button">Blank_佐毅</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">上海方创金融信息服务股份有限公司 iOS高级开发工程师</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">嗨，我是姚亚杰(@Blank_佐毅)，一名来自中国的 iOS 开发者 。现居上海。         个性签名：认知这个世界，找到自我的定位。</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="Visit blog" class="blog-button">博客</a></li>
                
                  <li class="navigation__item"><a href="" target="_blank" title="My Projects">关于</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

  
  <!-- Weibo -->
  <li class="navigation__item">
    <a href="http://weibo.com/LoveProgramming" title="@LoveProgramming 的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li>
  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/summerHearts" title="@summerHearts 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  
  
  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:summerHearts@163.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-disabled"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2016-03-13 18:56:32 +0800" itemprop="datePublished" class="post-meta__date date">2016-03-13</time> &#8226; <span class="post-meta__tags tags">iOS开发经验总结</span>
    </div>
    <h1 class="post-title">iOS 数据库实战</h1>
  </header>

  <section class="post">
    <p>经典的数据库服务开发库有一下几种：</p>

<div class="highlighter-rouge"><pre class="highlight"><code> CoreData 操作较为复杂, MagicalRecord 有着很多的特性,比如可以根据设置在主线程或者子线程中进行操作,方便快捷,能入榜最佳10大开源库自有其独到的地方,会使用 MagicalRecord 需要具备一定的 CoreData 相关知识,本人也只是现学现用,但深知其可以为开发带来的好处,使用数据库的朋友有着如下的一些选择.

  1. SQLite3    C函数形式(本人之前做过干嵌入式开发,即使是这样也不推荐使用面向过程毫无对象概念的SQLite3,有更好的方式为什么不用呢?)

  2. FMDB       对SQLite3的封装,有着对象的概念,熟悉SQ语句的朋友可以使用,但还没有做到对象与记录实时对应

  3. CoreData      他做到了对象与记录实时对应关系,使用其自身的搜索体系(不用SQ语言),但其基本的操作以及配置让人望而却步

  4. MagicalRecord   对 CoreData 官方的用法进行了人性化的封装,用过 CoreData 基本操作再使用 MagicalRecord 会深有体会

  5. ObjectiveRecord   也是对 CoreData 的人性化封装,使用更加傻瓜,但傻瓜的代价就是牺牲了一些更强大的功能,在Github上搜索关键字即可
</code></pre>
</div>

<p><a href="https://realm.io">Realm</a>
<a href="https://github.com/magicalpanda/magicalrecord">MagicalRecord</a>
<a href="https://github.com/summerHearts/MagicalRecordDataBase">MagicalRecordDemo</a></p>

<h1 id="realm">下边先介绍Realm</h1>

<p><img src="http://upload-images.jianshu.io/upload_images/325120-baf62f26956729cc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="" /></p>

<p>Realm.png</p>

<div class="highlighter-rouge"><pre class="highlight"><code>     Realm : Realm 是一个跨平台的移动数据库引擎.Realm 并不是对 Core Data 的简单封装.
    相反地， Realm 并不是基于 Core Data ，也不是基于 SQLite 所构建的。它拥有自己的数据库存储引擎，可以高效且快速地完成数据库的构建操作。
</code></pre>
</div>

<h1 id="section">环境配置：</h1>

<p><img src="http://upload-images.jianshu.io/upload_images/325120-17083b88bafe2c03.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="" /></p>

<p>环境配置.png</p>

<h1 id="section-1">开始使用：</h1>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">@interface</span> <span class="nc">Dog</span> <span class="p">:</span> <span class="nc">RLMObject</span>
<span class="k">@property</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
<span class="k">@property</span> <span class="n">NSData</span>   <span class="o">*</span><span class="n">picture</span><span class="p">;</span>
<span class="k">@property</span> <span class="n">NSInteger</span> <span class="n">age</span><span class="p">;</span>
<span class="k">@end</span>
<span class="k">@implementation</span> <span class="nc">Dog</span>
<span class="k">@end</span>
 <span class="n">RLM_ARRAY_TYPE</span><span class="p">(</span><span class="n">Dog</span><span class="p">)</span>

<span class="k">@interface</span> <span class="nc">Person</span> <span class="p">:</span> <span class="nc">RLMObject</span>
<span class="k">@property</span> <span class="n">NSString</span>             <span class="o">*</span><span class="n">name</span><span class="p">;</span>
<span class="k">@property</span> <span class="n">RLMArray</span><span class="o">&lt;</span><span class="n">Dog</span> <span class="o">*&gt;&lt;</span><span class="n">Dog</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">dogs</span><span class="p">;</span>
<span class="k">@end</span>
<span class="k">@implementation</span> <span class="nc">Person</span>
<span class="k">@end</span>

<span class="n">Dog</span> <span class="o">*</span><span class="n">mydog</span> <span class="o">=</span> <span class="p">[[</span><span class="n">Dog</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
<span class="n">mydog</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">@"Rex"</span><span class="p">;</span>
<span class="n">mydog</span><span class="p">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">mydog</span><span class="p">.</span><span class="n">picture</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span> <span class="c1">// properties are nullable
</span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"Name of dog: %@"</span><span class="p">,</span> <span class="n">mydog</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>

 <span class="n">RLMResults</span><span class="o">&lt;</span><span class="n">Dog</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">puppies</span> <span class="o">=</span> <span class="p">[</span><span class="n">Dog</span> <span class="nf">objectsWhere</span><span class="p">:</span><span class="s">@"age &lt; 2"</span><span class="p">];</span>
 <span class="n">puppies</span><span class="p">.</span><span class="n">count</span><span class="p">;</span> <span class="c1">// =&gt; 0 because no dogs have been added to the Realm yet
</span>
 <span class="n">RLMRealm</span> <span class="o">*</span><span class="n">realm</span> <span class="o">=</span> <span class="p">[</span><span class="n">RLMRealm</span> <span class="nf">defaultRealm</span><span class="p">];</span>
 <span class="p">[</span><span class="n">realm</span> <span class="nf">transactionWithBlock</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>
       <span class="p">[</span><span class="n">realm</span> <span class="nf">addObject</span><span class="p">:</span><span class="n">mydog</span><span class="p">];</span>
  <span class="p">}];</span>

 <span class="n">puppies</span><span class="p">.</span><span class="n">count</span><span class="p">;</span> <span class="c1">// =&gt; 1
</span>
<span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_queue_create</span><span class="p">(</span><span class="s">"background"</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="o">^</span><span class="p">{</span>
        <span class="n">Dog</span> <span class="o">*</span><span class="n">theDog</span> <span class="o">=</span> <span class="p">[[</span><span class="n">Dog</span> <span class="nf">objectsWhere</span><span class="p">:</span><span class="s">@"age == 1"</span><span class="p">]</span> <span class="nf">firstObject</span><span class="p">];</span>
         <span class="n">RLMRealm</span> <span class="o">*</span><span class="n">realm</span> <span class="o">=</span> <span class="p">[</span><span class="n">RLMRealm</span> <span class="nf">defaultRealm</span><span class="p">];</span>
         <span class="p">[</span><span class="n">realm</span> <span class="nf">beginWriteTransaction</span><span class="p">];</span>
         <span class="n">theDog</span><span class="p">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
        <span class="p">[</span><span class="n">realm</span> <span class="nf">commitWriteTransaction</span><span class="p">];</span>
 <span class="p">});</span>
</code></pre>
</div>

<p>更多信息请点击 ：<a href="https://realm.io/docs/objc/latest/">realmAPI集合</a></p>

<h1 id="magicalrecord">Magicalrecord</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>   Cocoa中存在一种技术叫Core Data，用来对数据进行持久化，类似于Java世界中的Hibernate。
   在新建Cocoa Application/iOS Application的向导中，有一个选项是要不要使用Core Data，当启用以后你会发现在AppDelegate.m中添加了大量与Core Data相关的代码，但是你对大部分代码不知所以然。
   MagicalRecord 受Ruby on Rails活动记录获取方式的便利性影响.项目目标是:
   1:清理我的Core Data相关代码
   2:支持清晰,简单,一行代码式的查询
   3:当需要优化请求时,仍然可以修改 NSFetchRequest.

   Magical Record的出现在一定程度上缓解了这个问题，降低了Core Data的使用门槛。Magical Record借用了Ruby on Rails中的Active Record模式，使得你可以非常容易的添加、查找、删除数据。
   AppDelegate.m中添加以下代码对Magical Record进行初始化
   启动时MR_mergedObjectModelFromMainBundle方法报错Core Data的模型有版本的概念，有可能在你Magical Record第一次初始化完成以后，你又更改了模型文件，导致Core Data去合并模型报错。解决办法很简单，点击菜单中的Project-&gt;Clean即可。项目使用ARC后，编译Magical Record不通过点击项目 -&gt; Build Phases -&gt; Compile Sources中, 双击报错的class文件, 编辑Compiler Flags加入 -fno-objc-arc。
</code></pre>
</div>

<h1 id="section-2">环境配置：</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>   使用 CocoaPods 安装
   把下面一行添加到 Podfile:
   pod "MagicalRecord"
   在工程目录执行: pod install
   现在你可以添加#import &lt;MagicalRecord/MagicalRecord.h&gt;到任意项目源文件中,并开始使用MagicalRecord!
</code></pre>
</div>

<h1 id="section-3">在工程中创建实例模型</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>   以定义实体 "Person"为例,它有属性age, firstName和lastName.
   创建一个新的数据模型,命名为TestModel(File --&gt; New --&gt; File--&gt;Core Data &gt; Data Model)
   添加一个新的实体,名为Person(Add Entity)
   添加属性age (Integer16), firstName (String)和 lastName (String) 4.创建 NSManagedObject (Editor &gt; Create NSManagedObject Subclass… &gt; Create)子类以更好地管理我们的实体
</code></pre>
</div>

<p><img src="http://upload-images.jianshu.io/upload_images/325120-7700c9e8535a5cdd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="" /></p>

<p><img src="http://upload-images.jianshu.io/upload_images/325120-c0e280e056df8675.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="" /></p>

<p>在AppDelegate中创建初始化数据库</p>

<p><img src="http://upload-images.jianshu.io/upload_images/325120-aa412202640e33df.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>具体使用方式如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>- (void)magicaRecord{
//创建上下文管理类
for (NSInteger i = 0; i&lt;10; i++) {
    //为了创建并插入一个新的实体实例到默认上下文对象中
    Person *person = [Person MR_createEntity];
    person.age =@(25+i);
    person.firstName = [NSString stringWithFormat:@"JSKKSK%ld",i];
    person.lastName = [NSString stringWithFormat:@"XXMMXM%ld",i];
    [[NSManagedObjectContext MR_defaultContext] MR_saveOnlySelfAndWait];
}
NSArray *personArray = [Person MR_findAll];
if (personArray.count&gt;0) {
    for (Person *person in personArray) {
        NSLog(@"firstName:%@    lastName:%@    age:%@",person.firstName,person.lastName,person.age);
    }
}
NSLog(@"--------------------------------");
NSArray *findAttributeArray = [Person MR_findByAttribute:@"age" withValue:@(25) andOrderBy:@"age" ascending:NO];
if (findAttributeArray.count&gt;0) {
    for (Person *person in findAttributeArray) {
        NSLog(@"firstName:%@    lastName:%@    age:%@",person.firstName,person.lastName,person.age);
    }
}
NSLog(@"--------------------------------");
Person *firstData= [Person MR_findFirst];
NSLog(@"firstName:%@    lastName:%@    age:%@",firstData.firstName,firstData.lastName,firstData.age);
NSLog(@"--------------------------------");
NSArray *deleteArray = [Person MR_findByAttribute:@"age" withValue:@(28) andOrderBy:@"age" ascending:NO];
if (deleteArray.count&gt;0) {
    Person *tempPerson = deleteArray[0];
    [tempPerson MR_deleteEntity];
    [[NSManagedObjectContext MR_defaultContext] MR_saveToPersistentStoreAndWait];
}
NSLog(@"--------------------------------");    
NSArray *personArrays = [Person MR_findAll];
if (personArrays.count&gt;0) {
    for (Person *person in personArrays) {
        NSLog(@"firstName:%@    lastName:%@    age:%@",person.firstName,person.lastName,person.age);
    }
  }
}
NSLog(@"--------------------------------");    

// 获取上下文环境
NSManagedObjectContext *defaultContext = [NSManagedObjectContext MR_defaultContext];

// 在当前上下文环境中创建一个新的 Person 对象.
Person *person  = [Person MR_createEntityInContext:defaultContext];
person.firstName = @"firstname";
person.lastName  = @"lastname";
person.age       = @100;

// 保存修改到当前上下文中.
[defaultContext MR_saveToPersistentStoreAndWait];


[MagicalRecord saveWithBlock:^(NSManagedObjectContext *localContext){

    Person *localPerson = [person MR_inContext:localContext];
    localPerson.firstName = @"Yan";
    localPerson.lastName = @"Feng";
}];
NSArray *personArray = [Person MR_findAll];
if (personArray.count&gt;0) {
    for (Person *person in personArray) {
        NSLog(@"firstName:%@    lastName:%@    age:%@",person.firstName,person.lastName,person.age);
    }
}
NSLog(@"--------------------------------");
[MagicalRecord saveWithBlock:^(NSManagedObjectContext *localContext){
    Person *localPerson = [person MR_inContext:localContext];
    localPerson.firstName = @"Yan";
    localPerson.lastName = @"Feng";
}  completion:^(BOOL success, NSError *error) {//这个完成的block,在主线程(队列)中调用,所以可以在此block里安全触发UI更新.

    NSArray * persons = [Person MR_findAll];

    [persons enumerateObjectsUsingBlock:^(Person * obj, NSUInteger idx, BOOL * _Nonnull stop) {
        NSLog(@"firstname: %@, lastname: %@\\n", obj.firstName, obj.lastName);
    }];
}];
</code></pre>
</div>

<h1 id="section-4">操作被管理的对象上下文</h1>

<div class="highlighter-rouge"><pre class="highlight"><code> 对象上下文环境是你操作Core Data内数据的基础,只有正确获取到了上下文环境,才有可能进行相关的读写操作.
 换句话说,程序的任意位置,只要能正确获取上下文,都能进行Core Data的操作.这也是使用Core Data共享数据的基础之一.相较于传统的方式,各个页面之间只需要与一个透明的上下文环境进行交互,即可进行页面间数据的共享.
</code></pre>
</div>

<h1 id="section-5">创建新的对象上下文</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>许多简单的类方法可以用来帮助你创建一个新的对象上下文:
+ [NSManagedObjectContext MR_context]: 设置默认的上下文为它的父级上下文.并发类型为 #NSPrivateQueueConcurrencyType.
+ [NSManagedObjectContext MR_newMainQueueContext]: 并发类型为 ** #NSMainQueueConcurrencyType**.
+ [NSManagedObjectContext MR_newPrivateQueueContext]: 并发类型为 #NSPrivateQueueConcurrencyType.
+ [NSManagedObjectContext MR_contextWithParent:…]: 允许自定义父级上下文.并发类型为 #NSPrivateQueueConcurrencyType.
+ [NSManagedObjectContext MR_contextWithStoreCoordinator:…]:允许自定义持久化存储协调器.并发类型为 #NSPrivateQueueConcurrencyType.
</code></pre>
</div>

<h1 id="section-6">保存对象</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>    通常,你的应用应该在数据变化时,将其保存到持久化存储层中.有些应用选择仅在应用结束时保存,但是在大多数情况下并不需要这样做 - 实际上,如果你仅在应用退出时保存数据,很有可能会丢失数据!如果你的应用闪退了,会生什么?用户会丢失所有已经保存的数据 - 这是一种非常糟糕的用户体验,却又很容易避免.
    如果你发现保存操作耗费了很长时间,你应该考虑使用一些方式优化:
    在后台线程保存: MagicalRecord 提供了一种简捷的API来改变并立即在后台线程保存数据 - 例如:
    [MagicalRecord saveWithBlock:^(NSManagedObjectContext *localContext) {

         } completion:^(BOOL success, NSError *error) {
                [application endBackgroundTask:bgTask];
                bgTask = UIBackgroundTaskInvalid;
     }];
    把任务分割成小块的保存任务: 某些数据量较大的任务,如导入大量的数据,应该被分割成更小块的保存任务.没有统一的标准规定单次保存多少任务最合适,所以你需要使用工具来测试你的应用工的性能以针对自己的应用进行调整.工具可选使用 Apple的 Instruments.
    处理需要长时间运行的保存任务
    当iOS应用退出时,有一个较短的时间来整理和保存数据到磁盘.如果你确定某个保存操作很可能会花费一定时间,最好的方式是请求延长应用的生命周期,比如这样:
    UIApplication *application = [UIApplication sharedApplication];
     __block UIBackgroundTaskIdentifier bgTask = [application     beginBackgroundTaskWithExpirationHandler:^{
        [application endBackgroundTask:bgTask];
         bgTask = UIBackgroundTaskInvalid;
   }];
</code></pre>
</div>

<h1 id="mjextensionmagicalrecord">实际中，我们通过MJExtension数据解析，那么如何导入到MagicalRecord中（导入数组）</h1>

<div class="highlighter-rouge"><pre class="highlight"><code> 由一个JSON数组提供的一组数据或者正在导入大量的单一类型数据的情况,很常见.导入这样的一组数据的具体实现细节,由+MR_importFromArray:类方法中能找到.

 NSArray *arrayOfPeopleData = /// result from JSON parser
 NSArray *people = [Person MR_importFromArray:arrayOfPeopleData];
 这个方法,和 +MR_importFromObject:一样,也是同步的,所以应该使用前面提到的后台执行block的方式来导入数据.
[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *)localContext {
   Person *importedPerson = [Person MR_importFromObject:personRecord inContext:localContext];
}];
</code></pre>
</div>

  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">最近的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2016/04/Socket%E9%80%9A%E4%BF%A1/" title="link to Socket通信">Socket通信</a></h2>
       <p class="excerpt">最近工作中需要用到scoket通信相关知识。工程中使用到了AsyncSocket。1. socket 连接即时通讯最大的特点就是实时性，基本感觉不到延时或是掉线，所以必须对socket的连接进行监视与检测，在断线时进行重新连接，如果用户退出登录，要将socket手动关闭，否则对服务器会造成一定的负荷。所以需要枚举socket的状态： typedef enum{       //连接中       BH_Socket_Connecting = 12,       //连接成功       B...&hellip;</p>
       <div class="post-list__meta"><time datetime="2016-04-10 11:55:32 +0800" class="post-list__meta--date date">2016-04-10</time> &#8226; <span class="post-list__meta--tags tags">iOS开发经验总结</span><a class="btn-border-small" href=/2016/04/Socket%E9%80%9A%E4%BF%A1/>继续阅读</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">更早的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2016/03/iOS%E5%9F%8B%E7%82%B9%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%A1%88/" title="link to iOS埋点业务方案">iOS埋点业务方案</a></h2>
       <p class="excerpt">   如果你的公司用户基数足够大，那么根据埋点数据分析得到的反馈是非常有用的。除了第三方的埋点数据分析，比如友盟，如果我们希望自己也存一份数据，作为对友盟数据的对比，在iOS工程中如何实现呢？   一般的埋点分为PV(界面级别的)，PA(action事件级别).下边为了减少冗余，简称PV,PA。PV中的数据一般都是静态的，与业务逻辑不相关，比如进入时间，离开时间，是否进入该界面等等。   所以这类需求是很好处理的，一般都会让所有的controller都继承BaseViewControlle...&hellip;</p>
       <div class="post-list__meta"><time datetime="2016-03-04 21:10:32 +0800" class="post-list__meta--date date">2016-03-04</time> &#8226; <span class="post-list__meta--tags tags">iOS开发经验总结</span><a class="btn-border-small" href=/2016/03/iOS%E5%9F%8B%E7%82%B9%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%A1%88/>继续阅读</a></div>
   </div>
   
</section>

<section class="post-comments">
  
    <div id="disqus_thread"></div>
    <script>
    
    var disqus_config = function () {
        this.page.url = "http://vno.onevcat.com/2016/03/iOS%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%88%98/";
        this.page.identifier = "/2016/03/iOS%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%88%98/";
    };

    var disqus_shortname = 'vno-jekyll';
    
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>要查看<a href="http://disqus.com/?ref_noscript"> Disqus </a>评论，请启用 JavaScript</noscript>
    
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a></span>
        <span class="footer__copyright">由 <a href="https://jekyllrb.com">Jekyll</a> 于 2016-06-23 生成，感谢 <a href="https://www.digitalocean.com/?refcode=30ed2d146762">Digital Ocean</a> 为本站提供稳定的 VPS 服务</span>
        <span class="footer__copyright">本站由 <a href="http://Blank_佐毅">@heartmusicbeat.com</a> 创建，采用 <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> 作为主题，您可以在 GitHub 找到<a href="https://github.com/onevcat/OneV-s-Den">本站源码</a> - &copy; 2016</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript" src="/js/main.js"></script>



    
  </body>

</html>
